/*!
 * frontkit v0.3.1
 * The powerful front-end framework from InJoin.
 *
 * http://frontkit.injoin.io
 */
!function(a){"use strict";a.module("frontkit",["frontkit.checkbox","frontkit.dropdown","frontkit.offcanvas","frontkit.tooltip"])}(angular),!function(a){"use strict";var b="<span class='DIRECTIVE' tabindex='0'></span>",c=a.module("frontkit.checkbox",["frontkit.utils"]);["checkbox","radio"].forEach(function(a){var d=b.replace("DIRECTIVE",a);c.directive(a,["$compile","$timeout","keycodes",function(a,b,c){var e={};return e.restrict="A",e.link=function(e,f){var g=a(d)(e);f.after(g),f.addClass("hide"),f.on("$destroy",function(){g.remove()}),g.on("keypress",function(a){("keypress"!==a.type||a.which===c.SPACE)&&(g.triggerHandler("click"),a.preventDefault())}),g.on("click",function(a){a.preventDefault(),f.prop("checked",!f.prop("checked")),b(function(){f.triggerHandler("click")})})},e}])})}(angular),!function(a){"use strict";var b=a.element,c=a.module("frontkit.dropdown",["frontkit.utils"]);c.value("dropdownConfig",{optionsPageSize:5}),c.directive("dropdown",["$document",function(c){var d={};return d.restrict="EA",d.replace=!0,d.transclude=!0,d.templateUrl="templates/dropdown/dropdown.html",d.controller="DropdownController",d.controllerAs="$dropdown",d.scope=!0,d.require=["dropdown","?ngModel"],d.compile=function(a,b){var c=b.ngModel;return c&&b.$set("ngModel","$parent."+c),d.link},d.link=function(d,e,f,g,h){var i=g[0],j=g[1];j&&(d.$watch("$dropdown.items",function(a){a=1===i.maxItems?a[0]:a,j.$setViewValue(a)},!0),j.$render=function(){var b=j.$viewValue;return null==b?void(i.items=[]):void(i.items=a.isArray(b)?b:[b])}),h(d,function(a){var c=b("<div>").append(a),d=c.querySelector(".dropdown-item"),f=c.querySelector(".dropdown-optgroups");d.length&&e.querySelector(".dropdown-container").prepend(d),f.length&&e.querySelector("dropdown-options").replaceWith(f)}),e.on("click",function(a){a.stopPropagation()}),c.on("click",function(){d.$safeApply(i.close)})},d}]),c.controller("DropdownController",["$scope","$parse","$attrs","$q",function(b,c,d,e){function f(){i.search=j}function g(b){var c={};return a.forEach(Object.keys(b).sort(),function(a){c[a]=b[a]}),c}function h(b){var c=[];return a.forEach(b,function(a){c=c.concat(a)}),c}var i=this,j="";i.rawOptions=[],i.options={},i.items=[],i.placeholder=null,i.valueKey=null,i.open=!1,i.search=j,i.activeOption=null,b.$parent.$watch(d.maxItems,function(a){i.maxItems=+a||1}),i.isFull=function(){return i.items.length>=i.maxItems},i.addItem=function(a){var c=!0;1===i.maxItems?i.items=[a]:i.isFull()||i.isSelected(a)?c=!1:i.items.push(a),c&&(i.activeOption=i.findAvailableOption(a)),i.isFull()&&i.close(),b.$safeApply()},i.close=function(){i.open=!1,f()},i.isSelected=function(a){return!!~i.items.indexOf(a)},i.findAvailableOption=function(a){var b=i.rawOptions,c=b.indexOf(a),d=c===b.length-1?-1:1;if(1===i.maxItems)return a;do c+=d,a=b[c];while(i.isSelected(a));return a},i.parseOptions=function(d,f){var j,k=c(f);b.$watch(d.expr,function(c){var f;return j=null,null==c?(i.options={},void(i.rawOptions=[])):(f=e.when(c).then(function(c){var e,l=a.isArray(c);if(f===j){if(!l&&!a.isObject(c))throw new Error("Dropdown options should be array or object!");i.options={},a.forEach(c,function(a,c){var e,f={};f.$dropdown=i,f[d.key]=l?null:c,f[d.item]=a,e=k(b,f),e=null==e?"":e.toString().trim(),i.options[e]=i.options[e]||(l?[]:{}),l?i.options[e].push(a):i.options[e][c]=a}),i.options=g(i.options),i.rawOptions=h(i.options),e=l?0:Object.keys(c)[0],i.activeOption=i.rawOptions[e]}}),void(j=f))},!0)}}]),c.directive("dropdownItems",["$compile",function(a){var b={};return b.restrict="EA",b.replace=!0,b.transclude=!0,b.templateUrl="templates/dropdown/items.html",b.require="^dropdown",b.link=function(b,c,d,e,f){f(function(a){c.append(a)}),c.attr("ng-repeat","item in $dropdown.items"),a(c)(b),d.$observe("placeholder",function(a){e.placeholder=a})},b}]),c.directive("dropdownOptions",["$compile","repeatParser","dropdownConfig",function(a,c,d){var e={};return e.restrict="EA",e.replace=!0,e.transclude=!0,e.templateUrl="templates/dropdown/options.html",e.require="^dropdown",e.compile=function(a){return a.parent().length?e.link:void 0},e.link=function(e,f,g,h,i){function j(){var a,b=h.rawOptions,c=l.scrollTop,d=b.indexOf(h.activeOption),e=l.querySelectorAll(".dropdown-option")[d];h.open&&e&&(a=e.offsetTop-l.scrollTop,0>a?c=e.offsetTop:l.clientHeight<=a+e.clientHeight&&(c=e.offsetTop+e.clientHeight-l.clientHeight),l.scrollTop=c)}function k(){var a,c=l.ownerDocument.defaultView,e=c.getComputedStyle(l,null),g=f.css("display"),h=d.optionsPageSize,i=b("<li class='dropdown-option'>&nbsp;</li>")[0];f.prepend(i),f.css("display","block"),a=i.clientHeight*h,a=["padding","border"].reduce(function(a,b){var c=e.getPropertyValue(b+"-top")||"",d=e.getPropertyValue(b+"-bottom")||"";return a+=+c.replace("px","")||0,a+=+d.replace("px","")||0},a),f.css({"overflow-y":"auto","max-height":a+"px"}),f.css("display",g),b(i).remove()}var l=f[0],m=f.querySelector(".dropdown-optgroup"),n=f.querySelector(".dropdown-option"),o=c.parse(g.options);o&&(h.parseOptions(o,g.groupBy),i(function(a){n.append(a)}),m.attr("ng-repeat","(group, options) in $dropdown.options"),m.attr("ng-class","{'dropdown-optgroup-ungrouped': group === ''}"),o.expr="options",n.attr("ng-repeat",c.toNgRepeat(o)),n.attr("ng-click","$dropdown.addItem( "+o.item+" )"),n.attr("ng-class","{active: $dropdown.activeOption === "+o.item+",disabled: $dropdown.maxItems > 1 &&          $dropdown.isSelected( "+o.item+" )}"),a(m)(e)),k(),h.valueKey=g.value||null,e.$watch("$dropdown.open",j),e.$watch("$dropdown.activeOption",j)},e}]),c.directive("dropdownContainer",["keycodes",function(b){function c(a,b,c){var d,e=b.querySelector(".dropdown-input"),f=b.querySelector(".dropdown-input-helper");return a.items.length?(f.text(c.val()).css("display","inline"),d=f[0].getBoundingClientRect().width,e.css("width","calc( "+d+"px + 1em )"),void f.css("display","none")):void e.css("width","100%")}function d(a){var b=String.fromCharCode(a);return b.trim().length||/\s/.test(b)}function e(a,b,c){c.search||(a.ctrlKey?c.items.splice(0):c.items.pop(),b.$safeApply())}function f(a,c,d){var e,f,g,h,i,j,k=d.rawOptions,l=d.activeOption,m=1===d.maxItems;if(!d.open)return d.open=!0,void c.$safeApply();switch(i=k.indexOf(l),0>i&&(i=0,l=k[0]),a.preventDefault(),a.keyCode){case b.ARROWUP:f=-1;break;case b.ARROWDOWN:f=1;break;case b.PGUP:f=-4;break;case b.PGDOWN:f=4}g=f,e=0>f?0:k.length-1,h=0>f?"max":"min";do{if(i=Math[h](e,i+f),f=g>1?-1:-1>g?1:g>0?1:-1,l=k[i],m)break;if(e===i&&null!=j&&1===Math.abs(f))break;j=l!==d.activeOption,j&=d.isSelected(l)}while(j);(!d.isSelected(l)||m)&&l!==d.activeOption&&(d.activeOption=l,c.$safeApply())}function g(a,b,c){a.preventDefault(),c.open?c.addItem(c.activeOption):c.open=!0,b.$safeApply()}function h(a,c,d){a.keyCode!==b.TAB&&a.target.blur(),c.$safeApply(d.close)}var i,j;return j={},j[b.BACKSPACE]=e,j[b.TAB]=h,j[b.ESCAPE]=h,j[b.ARROWUP]=f,j[b.ARROWDOWN]=f,j[b.PGUP]=f,j[b.PGDOWN]=f,j[b.ENTER]=g,i={},i.restrict="C",i.require="^dropdown",i.link=function(b,e,f,g){var h=e.querySelector(".dropdown-input input");b.$watch("$dropdown.search",function(a){a&&!g.isFull()&&(g.open=!0)}),b.$watchCollection("$dropdown.items",function(){c(g,e,h)}),e.on("click",function(){h[0].focus()}),h.on("focus",function(){var a=g.isFull();(!a||a&&1===g.maxItems)&&(g.open=!0),b.$safeApply()}),h.on("keydown",function(c){var e,f=c.keyCode,h=j[f];return a.isFunction(h)?h(c,b,g):(e=d(f),e&&!c.ctrlKey&&g.isFull()?c.preventDefault():void 0)}),h.on("keydown",function(){c(g,e,h)})},i}]),c.service("repeatParser",function(){var a=this,b=/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/,c=/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/;a.parse=function(a){var d,e,f,g,h,i=(a||"").match(b);return i&&(d=i[1],e=i[2],f=i[3],i=d.match(c))?(h=i[3]||i[1],g=i[2],{key:g,item:h,expr:e,trackBy:f}):void 0},a.toNgRepeat=function(a){var b=a.key?"("+a.key+", "+a.item+")":a.item,c=a.trackBy?" track by "+a.trackBy:"";return b+" in "+a.expr+c}})}(angular),!function(a){"use strict";var b=a.element,c=a.module("frontkit.offcanvas",[]);c.value("offcanvasConfig",{swipeThreshold:30}),c.directive("offcanvas",["$parse","$window","$document","swipeManager",function(a,c,d,e){var f=d.find("body");return function(d,g,h){function i(){var a=i.screenTestElement,c={active:!!k(d)};return a||(a=i.screenTestElement=b("<div></div>"),a.addClass("show-"+l)),f.append(a),c.screen="none"!==a.style("display"),a.remove(),c}function j(a,b){var c=a.screen&&a.active;a.screen?g.css("display",b.active||a.active?"block":"none"):g[0].style.display="",f.toggleClass("offcanvas",a.screen),g.toggleClass("offcanvas-menu",a.screen),setTimeout(function(){f.toggleClass("offcanvas-active",c),g.toggleClass("offcanvas-menu-active",c)},0),i.prevResult=a}var k=a(h.offcanvas),l=h.targetScreen;d.$watch(i,j,!0),b(c).on("resize",function(){j(i(),i.prevResult)}),f.on("click",function(){if(k(d))try{k.assign(d,!1),d.$apply()}catch(a){}}),e(function(a){var b;try{k.assign(d,a)}catch(c){}b=i(),b.active=a,j(b,i.prevResult)})}}]),c.factory("swipeManager",["$injector","$document","offcanvasConfig",function(a,b,c){var d;try{d=a.get("$swipe")}catch(e){}return function(a){var e;d&&d.bind(b,{start:function(a){e=a},end:function(b){var d=b.x-e.x,f=d>0?"right":"left";Math.abs(d)>c.swipeThreshold&&a("right"===f?!0:!1)}})}}])}(angular),!function(a){"use strict";var b=a.element,c=a.module("frontkit.tooltip",[]);c.directive("tooltip",["$document","$interpolate",function(a,c){var d={},e=b("<span>").addClass("tooltip");return a.find("body").append(e),d.priority=1e3,d.compile=function(a,b){var d=c(b.title);return b.$set("title",""),function(a,b){var c;b.on("mouseenter",function(){c=setTimeout(function(){var f=d(a).trim(),g=b[0].getBoundingClientRect();c=null,f&&(e.text(f).addClass("visible"),e.css({top:g.bottom+"px",left:g.left+g.width/2+"px"}))},300)}),b.on("mouseleave",function(){return c?(clearTimeout(c),void(c=null)):void e.removeClass("visible")})}},d}])}(angular),!function(a){"use strict";var b=a.element,c=a.module("frontkit.utils",[]);c.constant("keycodes",{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PGUP:33,PGDOWN:34,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40}),c.config(["$provide",function(b){var c=function(b){return"string"==typeof b||a.isFunction(b)};b.decorator("$rootScope",function(a){return a.$safeApply=function(b,d){var e;for(c(b)&&(d=b,b=a),b=b||a,c(d)&&b.$eval(d),e=b;e;){if(e.$$phase)return;e=e.$parent}b.$apply()},a})}]),b.prototype.querySelector=function(a){return b(this[0].querySelector(a))},b.prototype.querySelectorAll=function(a){return b(this[0].querySelectorAll(a))},b.prototype.style=function(a){var b=this[0].ownerDocument.defaultView,c=b.getComputedStyle(this[0],null);return c.getPropertyValue(a)}}(angular);